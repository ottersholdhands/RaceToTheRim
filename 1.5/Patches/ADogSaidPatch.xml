<?xml version="1.0" encoding="utf-8" ?>
<Patch>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>A Dog Said... Animal Prosthetics</li>
		</mods>

		<match Class="PatchOperationSequence">
			<operations>

				<!-- Organ installing recipes == should be most animals -->
				<li Class="PatchOperationAdd">

					<xpath>/Defs/RecipeDef[@Name = "OldWoundsAnimal"]/recipeUsers</xpath>
					<value>

						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>

				<!-- Organ installing recipes == should be most animals -->
				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallBionicAnimalStomach surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallBionicAnimalStomach"]/recipeUsers</xpath>
					<value>

						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallBionicAnimalKidney surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallBionicAnimalKidney"]/recipeUsers</xpath>
					<value>
						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallBionicAnimalLiver surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallBionicAnimalLiver"]/recipeUsers</xpath>
					<value>
						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallBionicAnimalLung surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallBionicAnimalLung"]/recipeUsers</xpath>
					<value>
						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallBionicAnimalHeart surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallBionicAnimalHeart"]/recipeUsers</xpath>
					<value>
						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallAnimalBrainStimulator surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallAnimalBrainStimulator"]/recipeUsers</xpath>
					<value>

						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallSpineAnimalBionic surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallSpineAnimalBionic" or defName ="InstallSpineAnimalSimple"]/recipeUsers</xpath>
					<value>

						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>



				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallJawAnimalBionic surgery <recipeUsers> -->
					<xpath>/Defs/RecipeDef[defName = "InstallJawAnimalBionic" or defName ="InstallJawAnimalSimple"]/recipeUsers</xpath>
					<value>
						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>




				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallNoseAnimalSimple surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallNoseAnimalSimple"]/recipeUsers</xpath>
					<value>

						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallBionicEyeAnimal surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallBionicEyeAnimal"]/recipeUsers</xpath>
					<value>
						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallEarAnimalSimple surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallEarAnimalSimple" or defName ="InstallEarAnimalBionic"]/recipeUsers</xpath>
					<value>

						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>




				<!-- Leg installing recipes == should be most animals -->
				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallPegLegAnimal surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallPegLegAnimal" or defName ="InstallSimpleProstheticLegAnimal" or defName ="InstallBionicLegAnimal"]/recipeUsers</xpath>
					<value>

						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>
					</value>
				</li>








				<!-- Tail installing recipe == Only for animal with tail-->
				<li Class="PatchOperationAdd">
					<!-- "Inserting animal defNames into InstallSimpleProstheticTailAnimal surgery <recipeUsers>" -->
					<xpath>/Defs/RecipeDef[defName = "InstallSimpleProstheticTailAnimal"]/recipeUsers</xpath>
					<value>


						<li>RttR_Fury</li>
						<li>RttR_Flightmare</li>
						<li>RttR_Gronckle</li>
						<li>RttR_Hotburple</li>
						<li>RttR_Nadder</li>
						<li>RttR_Nightmare</li>
						<li>RttR_Scauldron</li>
						<li>RttR_Zippleback</li>
						<li>RttR_TerribleTerror</li>
						<li>RttR_Rumblehorn</li>
						<li>RttR_Stormcutter</li>
						<li>RttR_Razorwhip</li>
						<li>RttR_TripleStryke</li>
						<li>RttR_Skrill</li>

					</value>
				</li>


				<!-- New prostethic parts -->


				<!-- Dragon Prosthetics -->

				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<ResearchProjectDef>
							<defName>RttR_DragonProsthetics</defName>
							<label>Dragon Prosthetics</label>
							<description>Learn to use and craft draconic animal prosthetics to replace such things as dragon wings</description>
							<baseCost>250</baseCost>
							<techLevel>Industrial</techLevel>
							<researchViewX>3</researchViewX>
							<researchViewY>2</researchViewY>
							<prerequisites>
								<li>SimpleAnimalProsthetics</li>
							</prerequisites>
							<tab>ADogSaid</tab>
						</ResearchProjectDef>

					</value>
				</li>

				<!-- Dragon Bionics -->

				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<ResearchProjectDef>
							<defName>RttR_DragonBionics</defName>
							<label>Dragon Bionics</label>
							<description>Learn to use and craft draconic animal bionics to replace such things as dragon wings</description>
							<baseCost>400</baseCost>
							<techLevel>Spacer</techLevel>
							<researchViewX>3</researchViewX>
							<researchViewY>3</researchViewY>
							<prerequisites>
								<li>AnimalBionics</li>

							</prerequisites>
							<requiredResearchBuilding>HiTechResearchBench</requiredResearchBuilding>
							<tab>ADogSaid</tab>
						</ResearchProjectDef>

					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<ThingDef ParentName="BodyPartProstheticBaseADS">
							<defName>RttR_ProstheticWing</defName>
							<label>draconic prosthetic wing</label>
							<description>Simple prosthetic wing. Should be able to replace any type of dragon wing.</description>
							<techLevel>Industrial</techLevel>
							<costList>
								<Steel>25</Steel>
								<ComponentIndustrial>2</ComponentIndustrial>
							</costList>
							<statBases>
								<WorkToMake>8000</WorkToMake>
								<Mass>2</Mass>
							</statBases>
							<techHediffsTags>
								<li>Simple</li>
							</techHediffsTags>
							<recipeMaker>
								<researchPrerequisite>RttR_DragonProsthetics</researchPrerequisite>
							</recipeMaker>
						</ThingDef>

					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<ThingDef ParentName="BodyPartBionicBaseADS">
							<defName>RttR_BionicWing</defName>
							<label>draconic bionic wing</label>
							<description>Improved bionic wing for dragons. Should be able to replace any type of dragon wing.</description>
							<techLevel>Spacer</techLevel>
							<costList>
								<Plasteel>25</Plasteel>							
								<ComponentSpacer>2</ComponentSpacer>
							</costList>
							<statBases>
								<WorkToMake>12000</WorkToMake>
								<Mass>8</Mass>
							</statBases>
							<techHediffsTags>
								<li>Advanced</li>
							</techHediffsTags>
							<recipeMaker>
								<researchPrerequisite>RttR_DragonBionics</researchPrerequisite>
							</recipeMaker>
						</ThingDef>

					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<HediffDef ParentName="addedPartAnimal">
							<defName>RttR_ProstheticWing</defName>
							<label>draconic prosthetic wing</label>
							<description>Simple prosthetic wing. Should be able to replace any type of dragon wing.</description>
							<defaultLabelColor>(233,129,69)</defaultLabelColor>
							<spawnThingOnRemoved>RttR_ProstheticWing</spawnThingOnRemoved>
							<addedPartProps>
								<solid>true</solid>
								<partEfficiency>0.85</partEfficiency>
								<betterThanNatural>false</betterThanNatural>
							</addedPartProps>
							<stages>
								<li>
									<statOffsets>
										<ArmorRating_Sharp>0.02</ArmorRating_Sharp>
										<ArmorRating_Blunt>0.02</ArmorRating_Blunt>
										<ArmorRating_Heat>0.02</ArmorRating_Heat>
									</statOffsets>
								</li>			
							</stages>
						</HediffDef>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>

						<HediffDef ParentName="addedPartAnimal">
							<defName>RttR_BionicWing</defName>
							<label>draconic bionic wing</label>
							<description>Improved bionic wing for dragons. Should be able to replace any type of dragon wing.</description>
							<spawnThingOnRemoved>RttR_BionicWing</spawnThingOnRemoved>
							<addedPartProps>
								<solid>true</solid>
								<partEfficiency>1.25</partEfficiency>
							</addedPartProps>
							<stages>
								<li>
									<capMods>
										<li>
											<capacity>Manipulation</capacity>
											<offset>0.01</offset>
										</li>
									</capMods>
									<statOffsets>
										<ArmorRating_Sharp>0.03</ArmorRating_Sharp>
										<ArmorRating_Blunt>0.03</ArmorRating_Blunt>
										<ArmorRating_Heat>0.03</ArmorRating_Heat>
									</statOffsets>
								</li>	 
							</stages>
						</HediffDef>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<RecipeDef Abstract="True" Name="RttR_WingBaseAnimal" ParentName="SurgeryFleshAnimal">
							<appliedOnFixedBodyParts>
								<li>RttR_Wing</li>

							</appliedOnFixedBodyParts>
						</RecipeDef>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<RecipeDef ParentName="RttR_WingBaseAnimal">
							<defName>RttR_InstallSimpleWing</defName>
							<label>install draconic prosthetic wing</label>
							<description>Installs draconic prosthetic wing.</description>
							<workerClass>Recipe_InstallArtificialBodyPart</workerClass>
							<jobString>Installing draconic prosthetic wing.</jobString>
							<workAmount>2000</workAmount>
							<skillRequirements>
								<Medicine>4</Medicine>
							</skillRequirements>
							<ingredients>
								<li>
									<filter>
										<categories>
											<li>Medicine</li>
										</categories>
									</filter>
									<count>1</count>
								</li>
								<li>
									<filter>
										<thingDefs>
											<li>RttR_ProstheticWing</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<categories>
									<li>Medicine</li>
								</categories>
								<thingDefs>
									<li>RttR_ProstheticWing</li>
								</thingDefs>
							</fixedIngredientFilter>
							<addsHediff>RttR_ProstheticWing</addsHediff>

						</RecipeDef>

					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<RecipeDef ParentName="RttR_WingBaseAnimal">
							<defName>RttR_InstallBionicWing</defName>
							<label>install draconic bionic wing</label>
							<description>Installs draconic bionic wing. Requires a min skill in medicine of 8.</description>
							<workerClass>Recipe_InstallArtificialBodyPart</workerClass>
							<jobString>Installing draconic bionic wing.</jobString>
							<workAmount>2000</workAmount>
							<skillRequirements>
								<Medicine>8</Medicine>
							</skillRequirements>
							<ingredients>
								<li>
									<filter>
										<categories>
											<li>Medicine</li>
										</categories>
									</filter>
									<count>1</count>
								</li>
								<li>
									<filter>
										<thingDefs>
											<li>RttR_BionicWing</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<categories>
									<li>Medicine</li>
								</categories>
								<thingDefs>
									<li>RttR_BionicWing</li>
								</thingDefs>
							</fixedIngredientFilter>

							<addsHediff>RttR_BionicWing</addsHediff>

						</RecipeDef>
					</value>
				</li>

				<!-- Final patch to vanilla to ensure these operations appear in all animals when they should -->

				<li Class="PatchOperationAdd"> 
					<xpath>/Defs/ThingDef[@Name="AnimalThingBase"]/recipes</xpath>
					<value>
						<li>RttR_InstallSimpleWing</li>
						<li>RttR_InstallBionicWing</li>




					</value>
				</li>


			</operations>
		</match>
	</Operation>


</Patch>

